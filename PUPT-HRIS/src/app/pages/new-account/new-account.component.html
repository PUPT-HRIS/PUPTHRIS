<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<form [formGroup]="newAccountForm" (ngSubmit)="onSubmit()" class="bg-base-200 rounded-lg shadow-lg max-w-6xl mx-auto mt-3">
  <div class="bg-maroon text-white p-4 rounded-t-lg w-full">
    <h2 class="text-xl font-bold">Create New Account</h2>
  </div>
  
  <div class="grid grid-cols-2 gap-6 p-6">
    <!-- Fcode -->
    <div class="form-control w-full">
      <label class="label" for="Fcode">
        <span class="label-text font-bold">Fcode <span class="text-red-500">*</span></span>
      </label>
      <input
        type="text"
        id="Fcode"
        formControlName="Fcode"
        placeholder="Enter Fcode"
        class="input input-bordered w-full"
      />
    </div>

    <!-- Surname -->
    <div class="form-control w-full">
      <label class="label" for="Surname">
        <span class="label-text font-bold">Surname <span class="text-red-500">*</span></span>
      </label>
      <input
        type="text"
        id="Surname"
        formControlName="Surname"
        placeholder="Enter Surname"
        class="input input-bordered w-full"
      />
    </div>

    <!-- First Name -->
    <div class="form-control w-full">
      <label class="label" for="FirstName">
        <span class="label-text font-bold">First Name <span class="text-red-500">*</span></span>
      </label>
      <input
        type="text"
        id="FirstName"
        formControlName="FirstName"
        placeholder="Enter First Name"
        class="input input-bordered w-full"
      />
    </div>

    <!-- Middle Name -->
    <div class="form-control w-full">
      <label class="label" for="MiddleName">
        <span class="label-text font-bold">Middle Name</span>
      </label>
      <input
        type="text"
        id="MiddleName"
        formControlName="MiddleName"
        placeholder="Enter Middle Name"
        class="input input-bordered w-full"
      />
    </div>

    <!-- Name Extension -->
    <div class="form-control w-full">
      <label class="label" for="NameExtension">
        <span class="label-text font-bold">Name Extension</span>
      </label>
      <input
        type="text"
        id="NameExtension"
        formControlName="NameExtension"
        placeholder="Enter Name Extension"
        class="input input-bordered w-full"
      />
    </div>

    <!-- Email -->
    <div class="form-control w-full">
      <label class="label" for="Email">
        <span class="label-text font-bold">Email <span class="text-red-500">*</span></span>
      </label>
      <input
        type="email"
        id="Email"
        formControlName="Email"
        placeholder="Enter Email"
        class="input input-bordered w-full"
      />
    </div>

    <!-- Employment Type -->
    <div class="form-control w-full">
      <label class="label" for="EmploymentType">
        <span class="label-text font-bold">Employment Type <span class="text-red-500">*</span></span>
      </label>
      <select
        id="EmploymentType"
        formControlName="EmploymentType"
        class="select select-bordered w-full"
      >
        <option value="" disabled selected>- Please Select Option -</option>
        <option value="fulltime">Fulltime</option>
        <option value="parttime">Part-time</option>
        <option value="temporary">Temporary</option>
        <option value="designee">Designee</option> 
      </select>
    </div>

    <!-- Password -->
    <div class="form-control w-full relative">
      <label class="label" for="Password">
        <span class="label-text font-bold">Password <span class="text-red-500">*</span></span>
      </label>
      <div class="flex">
        <input
          type="text"
          id="Password"
          formControlName="Password"
          placeholder="Enter Password"
          class="input input-bordered w-full"
        />
        <button 
          type="button" 
          (click)="onGeneratePasswordClick()" 
          class="btn bg-black text-white ml-2">
          Generate
        </button>
      </div>
    </div>

    <!-- Roles (Checkboxes for multi-select) -->
    <div class="form-control w-full">
      <label class="label-text font-bold">Roles <span class="text-red-500">*</span></label>
      <div *ngFor="let role of roles">
        <label class="label">
          <input
            type="checkbox"
            [value]="role.RoleID"
            (change)="onRoleCheckboxChange($event)"
            [checked]="newAccountForm.value.Roles.includes(role.RoleID)"
          />
          <span class="label-text">{{ role.RoleName }}</span>
        </label>
      </div>      
    </div>

    <!-- Department -->
    <div class="form-control w-full">
      <label class="label" for="DepartmentID">
        <span class="label-text font-bold">Department <span class="text-red-500">*</span></span>
      </label>
      <select id="DepartmentID" formControlName="DepartmentID" class="select select-bordered w-full">
        <option value="" disabled selected>- Please Select Option -</option>
        <option value="na">Not Applicable</option> <!-- New Option -->
        <option *ngFor="let department of departments" [value]="department.DepartmentID">
          {{ department.DepartmentName }}
        </option>
      </select>      
    </div>
  </div>

  <div class="flex justify-end p-4">
    <button type="submit" class="btn bg-black text-white" [disabled]="newAccountForm.invalid">Create Account</button>
  </div>
</form>

<!-- Toast Notifications -->
<div class="toast" [ngClass]="{'show': toastVisible, 'hide': !toastVisible}">
  <div *ngIf="toastType === 'success'" class="alert alert-success">
    <span>{{ toastMessage }}</span>
  </div>
  <div *ngIf="toastType === 'error'" class="alert alert-error">
    <span>{{ toastMessage }}</span>
  </div>
</div>
