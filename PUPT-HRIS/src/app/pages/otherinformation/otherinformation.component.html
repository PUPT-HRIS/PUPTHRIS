<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<div class="container bg-base-200 rounded-lg shadow-lg p-0 mx-auto max-w-6xl mb-10">
  <div class="bg-maroon text-white p-4 rounded-t-lg w-full">
    <h1 class="text-2xl font-bold">Other Information</h1>
  </div>

  <div class="p-6 space-y-6">
    <!-- Special Skills Section -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">Special Skills</h2>
        <button class="btn btn-add bg-black text-white" (click)="isEditingSkill = true">Add Skill</button>
      </div>
      <div *ngIf="specialSkillsData.length > 0; else noSkills">
        <div *ngFor="let skill of specialSkillsData; let i = index" class="flex justify-between items-center py-2 border-b">
          <span>{{ i + 1 }}. {{ skill.Skill.trim() || 'No entered information' }}</span>
          <div>
            <button class="btn btn-sm bg-black text-white mr-2" (click)="editSpecialSkill(skill.SpecialSkillsID)">Edit</button>
            <button class="btn btn-sm bg-maroon text-white" (click)="deleteSpecialSkill(skill.SpecialSkillsID)">Delete</button>
          </div>
        </div>
      </div>
      <ng-template #noSkills>
        <p class="text-gray-500 italic">Add your skills</p>
      </ng-template>
    </div>

    <!-- Non-Academic Distinctions Section -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">Non-Academic Distinctions</h2>
        <button class="btn btn-add bg-black text-white" (click)="isEditingDistinction = true">Add Distinction</button>
      </div>
      <div *ngIf="nonAcademicData.length > 0; else noDistinctions">
        <div *ngFor="let distinction of nonAcademicData; let i = index" class="flex justify-between items-center py-2 border-b">
          <span>{{ i + 1 }}. {{ distinction.Distinction.trim() || 'No entered information' }}</span>
          <div>
            <button class="btn btn-sm bg-black text-white mr-2" (click)="editDistinction(distinction.NonAcademicID)">Edit</button>
            <button class="btn btn-sm bg-maroon text-white" (click)="deleteDistinction(distinction.NonAcademicID)">Delete</button>
          </div>
        </div>
      </div>
      <ng-template #noDistinctions>
        <p class="text-gray-500 italic">Add your distinctions</p>
      </ng-template>
    </div>

    <!-- Memberships Section -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">Memberships</h2>
        <button class="btn btn-add bg-black text-white" (click)="isEditingMembership = true">Add Membership</button>
      </div>
      <div *ngIf="membershipData.length > 0; else noMemberships">
        <div *ngFor="let membership of membershipData; let i = index" class="flex justify-between items-center py-2 border-b">
          <span>{{ i + 1 }}. {{ membership.Association.trim() || 'No entered information' }}</span>
          <div>
            <button class="btn btn-sm bg-black text-white mr-2" (click)="editMembership(membership.MembershipID)">Edit</button>
            <button class="btn btn-sm bg-maroon text-white" (click)="deleteMembership(membership.MembershipID)">Delete</button>
          </div>
        </div>
      </div>
      <ng-template #noMemberships>
        <p class="text-gray-500 italic">Add your memberships</p>
      </ng-template>
    </div>
  </div>
</div>

<!-- Add/Edit Forms (hidden by default) -->
<div *ngIf="isEditingSkill || isEditingDistinction || isEditingMembership" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center">
  <div class="bg-white p-8 rounded-lg shadow-xl max-w-md w-full">
    <!-- Special Skills Form -->
    <div *ngIf="isEditingSkill">
      <h3 class="text-xl font-semibold mb-4">{{ currentSkillId ? 'Edit' : 'Add' }} Special Skill</h3>
      <form [formGroup]="specialSkillsForm" (ngSubmit)="onSubmitSkill()" class="space-y-4">
        <div class="form-control w-full">
          <label for="Skill" class="label-text font-bold">Skill</label>
          <textarea id="Skill" formControlName="Skill" class="textarea textarea-bordered w-full h-24" placeholder="Describe your special skill"></textarea>
        </div>
        <div class="flex justify-end space-x-2">
          <button type="submit" class="btn btn-save bg-black text-white">{{ currentSkillId ? 'Update' : 'Add' }} Skill</button>
          <button type="button" class="btn btn-cancel bg-maroon text-white" (click)="isEditingSkill = false">Cancel</button>
        </div>
      </form>
    </div>

    <!-- Non-Academic Distinctions Form -->
    <div *ngIf="isEditingDistinction">
      <h3 class="text-xl font-semibold mb-4">{{ currentDistinctionId ? 'Edit' : 'Add' }} Non-Academic Distinction</h3>
      <form [formGroup]="nonAcademicForm" (ngSubmit)="onSubmitDistinction()" class="space-y-4">
        <div class="form-control w-full">
          <label for="Distinction" class="label-text font-bold">Distinction</label>
          <textarea id="Distinction" formControlName="Distinction" class="textarea textarea-bordered w-full h-24" placeholder="Enter your non-academic distinction"></textarea>
        </div>
        <div class="flex justify-end space-x-2">
          <button type="submit" class="btn btn-save bg-black text-white">{{ currentDistinctionId ? 'Update' : 'Add' }} Distinction</button>
          <button type="button" class="btn btn-cancel bg-maroon text-white" (click)="isEditingDistinction = false">Cancel</button>
        </div>
      </form>
    </div>

    <!-- Memberships Form -->
    <div *ngIf="isEditingMembership">
      <h3 class="text-xl font-semibold mb-4">{{ currentMembershipId ? 'Edit' : 'Add' }} Membership</h3>
      <form [formGroup]="membershipForm" (ngSubmit)="onSubmitMembership()" class="space-y-4">
        <div class="form-control w-full">
          <label for="Association" class="label-text font-bold">Association</label>
          <textarea id="Association" formControlName="Association" class="textarea textarea-bordered w-full h-24" placeholder="Enter the name of the association or organization"></textarea>
        </div>
        <div class="flex justify-end space-x-2">
          <button type="submit" class="btn btn-save bg-black text-white">{{ currentMembershipId ? 'Update' : 'Add' }} Membership</button>
          <button type="button" class="btn btn-cancel bg-maroon text-white" (click)="isEditingMembership = false">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Toast Notifications -->
<div *ngIf="showToast" class="toast toast-end">
  <div *ngIf="toastType === 'success'" class="alert alert-success">
    <span>{{ toastMessage }}</span>
  </div>
  <div *ngIf="toastType === 'error'" class="alert alert-error">
    <span>{{ toastMessage }}</span>
  </div>
  <div *ngIf="toastType === 'warning'" class="alert alert-warning">
    <span>{{ toastMessage }}</span>
  </div>
</div>
