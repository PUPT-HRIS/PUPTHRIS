<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<div class="overflow-x-auto px-10">
  <div class="flex-1 mb-2">
    <a class="text-lg font-normal">You are currently viewing the list of Employees.</a>
  </div>
  <table class="table table-zebra w-full border-separate border-spacing-0">
    <!-- head -->
    <thead>
      <tr class="bg-red-900 text-white">
        <th class="p-4">#</th>
        <th class="p-4">Fcode</th>
        <th class="p-4">Name</th>
        <th class="p-4">Instructor Status</th>
        <th class="p-4">Department</th>
        <th class="p-4">Employment Type</th>
        <th class="p-4 w-36">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of paginatedUsers; let i = index">
        <th class="p-4">{{ (currentPage - 1) * itemsPerPage + i + 1 }}</th>
        <td class="p-4">{{ user.Fcode }}</td>
        <td class="p-4">
          {{ user.FirstName }} {{ user.MiddleName }} {{ user.Surname }} {{ user.NameExtension }}
        </td>
        <td class="p-4">
          {{ getRoleName(user.Roles) }}
        </td>
        <td class="p-4">{{ user.Department?.DepartmentName }}</td>
        <td class="p-4">{{ user.EmploymentType }}</td>
        <td class="p-4">
          <button class="btn btn-primary btn-sm" (click)="openModal(user)">View Info</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Pagination Controls -->
<div class="pagination-controls">
  <button (click)="previousPage()" [disabled]="currentPage === 1" class="btn">Previous</button>

  <span *ngFor="let page of [].constructor(totalPages); let i = index">
    <button (click)="setPage(i + 1)" [class.active]="i + 1 === currentPage" class="btn">
      {{ i + 1 }}
    </button>
  </span>

  <button (click)="nextPage()" [disabled]="currentPage === totalPages" class="btn">Next</button>
</div>

<!-- Updated Modal with Sections -->
<div *ngIf="isModalOpen" class="modal modal-open">
  <div class="modal-box">
    <div class="modal-sidebar">
      <h3 class="font-bold text-lg mb-4">Employee Information</h3>
      <div class="tab-list">
        <a class="tab" [class.tab-active]="activeTab === 'basic'" (click)="setActiveTab('basic')">Basic Details</a>
        <a class="tab" [class.tab-active]="activeTab === 'education'" (click)="setActiveTab('education')">Educational Background</a>
        <a class="tab" [class.tab-active]="activeTab === 'personal'" (click)="setActiveTab('personal')">Personal Details</a>
        <a class="tab" [class.tab-active]="activeTab === 'contact'" (click)="setActiveTab('contact')">Contact Details</a>
        <a class="tab" [class.tab-active]="activeTab === 'family'" (click)="setActiveTab('family')">Family Background</a>
        <a class="tab" [class.tab-active]="activeTab === 'civil'" (click)="setActiveTab('civil')">Civil Service Eligibilities</a>
        <a class="tab" [class.tab-active]="activeTab === 'learning'" (click)="setActiveTab('learning')">Learning & Development</a>
        <a class="tab" [class.tab-active]="activeTab === 'work'" (click)="setActiveTab('work')">Work Experience</a>
        <a class="tab" [class.tab-active]="activeTab === 'voluntary'" (click)="setActiveTab('voluntary')">Voluntary Work</a>
        <a class="tab" [class.tab-active]="activeTab === 'character'" (click)="setActiveTab('character')">Character References</a>
      </div>
    </div>
    
    <div class="modal-content">
      <div class="modal-header">
        <h3>{{ activeTab | titlecase }} Information</h3>
      </div>
      
      <div class="tab-content">
        <!-- Basic Details Content -->
        <div *ngIf="activeTab === 'basic'">
          <table class="info-table">
            <tbody>
              <tr>
                <th>Employee No:</th>
                <td>{{ basicDetails?.EmployeeNo }}</td>
              </tr>
              <tr>
                <th>Faculty Code:</th>
                <td>{{ basicDetails?.FacultyCode }}</td>
              </tr>
              <tr>
                <th>Name:</th>
                <td>{{ basicDetails?.Honorific }} {{ basicDetails?.FirstName }} {{ basicDetails?.MiddleInitial }} {{ basicDetails?.LastName }} {{ basicDetails?.NameExtension }}</td>
              </tr>
              <tr>
                <th>Date of Birth:</th>
                <td>{{ basicDetails?.DateOfBirth | date:'longDate' }}</td>
              </tr>
              <tr>
                <th>Sex:</th>
                <td>{{ basicDetails?.Sex }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Other tab contents... -->
        <!-- Update the structure for other tabs similarly -->

      </div>

      <div class="modal-footer">
        <button class="btn" (click)="closeModal()">Close</button>
      </div>
    </div>
  </div>
</div>
